---
{"제목":"같이 달램 프로젝트 도중 프로덕션 환경 이미지파일 누락 이슈","날짜":"2025-04-28","tags":["Deploy","Project","Issue"],"dg-publish":true,"permalink":"/이슈/같이 달램 프로젝트 도중 프로덕션 환경 이미지파일 누락 이슈/","dgPassFrontmatter":true,"created":"2025-04-28T12:42:01.259+09:00","updated":"2025-05-09T12:35:09.705+09:00"}
---

## ❗ **문제 발생 배경** 

배포환경에서 이미지 파일이 보이지 않는 이슈가 확인 됐습니다.

---
## ❓ **문제 분석** 

배포 환경에서만 이미지 파일이 보이지않고 로컬 환경에서는 이미지가 보이는걸 보아 이미지의 경로나 이미지 파일에 대한 누락이 이루어지지않았나 분석하였습니다.

절대 경로 <-> 상대 경로 로 계속 바꿔가보면서 로컬 환경과 프로덕션 환경의 경로 분석을 해보았었는데 아무리 시도하여도 프로덕션 환경에서만 이미지 파일의 노출이 안됐습니다

그렇기에 이미지 파일에 대한 누락으로 판단하고 해결을 시도 해보았습니다.

----
## ✅ **해결 과정** 
[[Project 때 aws 사용정리\|Project 때 aws 사용정리]]
현재 워크플르오는

1. GitHub Action의 가상 Ubuntu 서버에서 애플리케이션 빌드 수행
2. Linux 커맨드를 활용한 빌드 파일 압축
3. SSH 프로토콜(포트 22)을 통한 EC2 인스턴스 접근
4. Secure Copy Protocol(SCP)을 이용한 압축 파일 전송,해제 및 실행

이런식으로 진행이 되고있었는데 이 압축파일을 최소한으로 보내다보니 용량이 큰 이미지파일이나 다른 파일들을 제외하고 .next 즉 빌드 결과물만 가상서버로 보냈었습니다. 

찾아보니 번들링되어 있는 .next파일에는 이미지 파일과 다른 config파일들은 이 빌드 결과물에 들어가지않는다는 점을 알게 되어

/front 파일에 변경점이 있을시 git pull origin main 명령어를 통해 새로 추가된 이미지 파일 , 설정 파일들을 가져올 수 있게 워크플로우를 추가하여 해결했습니다.

---
## 🛠️ **교훈 및 개선점**

프로덕션 환경을 직접 컨트롤 하는 에러를 겪고 가상 서버에서의 환경과 로컬의 환경을 동일시하게 작업하는것도 하나의 기술인걸 알게 됐고 개발에는 다양한 방식이 있지만 언제나 모범사례를 찾기 위해 사고를 전환해보는것도 많은 도움이 된거같습니다.
